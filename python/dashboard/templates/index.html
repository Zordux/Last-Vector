<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Last-Vector Dashboard</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 1rem 2rem; background: #111; color: #eee; }
      .card { border: 1px solid #444; padding: 1rem; margin-bottom: 1rem; border-radius: 8px; }
      code { color: #99e2ff; }
      .warning { color: #ffb766; }
    </style>
  </head>
  <body>
    <h1>Last-Vector Training Dashboard</h1>
    <p class="warning">LAN binding enabled. Keep this dashboard on trusted networks only.</p>

    {% if runs|length == 0 %}
      <p>No runs found in <code>runs/</code>.</p>
    {% endif %}

    {% for run in runs %}
      <div class="card">
        <h2>{{ run.run_id }}</h2>
        <p>State: <b>{{ run.state }}</b></p>
        <p>Algorithm: {{ run.config.get('algo', 'n/a') }}</p>
        <p>Policy: {{ run.config.get('policy', 'n/a') }}</p>
        <p>Steps: {{ run.steps }}</p>
        <p>Episodes: {{ run.episodes }}</p>
        <p>Rolling reward: {{ run.last_metric.get('ep_rew_mean', 0) }}</p>
        <p>Rolling survival (steps): {{ run.last_metric.get('ep_len_mean', 0) }}</p>
        <p>Current checkpoint: {{ run.current_checkpoint or 'none' }}</p>
        <p>Best model: {{ run.best_model or 'none' }}</p>
        <p>TensorBoard: <code>{{ run.tensorboard_hint }}</code></p>
      </div>
    {% endfor %}
  </body>
</html>
