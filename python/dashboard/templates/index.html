<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Last-Vector Dashboard</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 1rem 2rem; background: #111; color: #eee; }
      .card { border: 1px solid #444; padding: 1rem; margin-bottom: 1rem; border-radius: 8px; }
      code, a { color: #99e2ff; }
      .muted { color: #bbb; }
      .state { font-weight: bold; }
    </style>
  </head>
  <body>
    <h1>Last-Vector Training Dashboard</h1>
    <p><b>LAN exposure warning:</b> this dashboard binds on <code>0.0.0.0</code>. Keep it on trusted networks only.</p>

    {% if runs|length == 0 %}
      <p>No runs found in <code>runs/</code>.</p>
    {% endif %}

    {% for run in runs %}
      <div class="card">
        <h2>{{ run.run_id }}</h2>
        <p>State: <span class="state">{{ run.state }}</span></p>
        <p>Algo: {{ run.config.get('algo', 'n/a') }} | Policy: {{ run.config.get('policy', 'n/a') }}</p>
        <p>Timesteps: {{ run.last_metric.get('timesteps', 0) }} | Reward(mean): {{ run.last_metric.get('ep_rew_mean', 0) }}</p>
        <p>Current checkpoint: {{ run.current_checkpoint or 'none' }}</p>
        <p>Best model: {{ run.best_model or 'none' }}</p>
        <p>Checkpoint count: {{ run.checkpoints|length }}</p>
        <p>TensorBoard logdir: {{ run.tensorboard_dir or 'none' }}</p>
        {% if run.tensorboard_dir %}
        <p class="muted">Launch: <code>tensorboard --logdir {{ run.tensorboard_dir }}</code></p>
        {% endif %}
        {% if run.status %}
        <p>Status file: <code>{{ run.status }}</code></p>
        {% endif %}
      </div>
    {% endfor %}
  </body>
</html>
